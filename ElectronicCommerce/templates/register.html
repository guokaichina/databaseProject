<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="shortcut icon" href="/static/images/logo.png" type="image/x-icon">
    <link type="text/css" rel="stylesheet" href="/static/css/base.css"/>
    <link type="text/css" rel="stylesheet" href="/static/css/regist.css"/>
    <script type="text/javascript" src="/static/js/jquery-3.6.1.min.js"></script>
    <link type="text/css" rel="stylesheet" href="/static/css/popBox.css">
    <title>优品注册</title>
</head>
<body>

<!--Begin Regist Begin-->
<div class="log_bg">
    <div class="top">
        <div class="logo"><a href="{% url 'index' %}"><img src="/static/picture/logo.png"/></a></div>
    </div>
    <!-- 选择注册类型，我是商家，我是顾客 -->
    <div class="register_type">
        <input type="button" value="我是商家" onclick="sellerRegister()">
        <input type="button" value="我是顾客" onclick="buyerRegister()">
    </div>
    <!-- 注册 -->
    <div class="register">
        <!-- 注册框左边的图片 -->
        <div class="log_img"><img src="/static/picture/l_img.png" width="611" height="425"/></div>
        <!-- 注册框表单 -->
        <div class="reg_c">
            <!-- 商家注册表单 -->
            <form id="sellerRegister" action="" method="post">
                {% csrf_token %}
                <table style="width:420px; font-size:14px; margin:20px;">
                    <tr height="50">
                        <td width="95">&nbsp;</td>
                        <td>
                            <span class="fl" style="font-size:24px;">商家注册</span>
                            <span class="fr">已有商城账号，<a href="{% url 'login' %}" style="color:#ff4e00;">我要登录</a></span>
                        </td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;用户名 &nbsp;
                        </td>
                        <td><input id="sellerName" type="text" value="" placeholder="请输入用户名" class="l_user"
                                   name="sellerName"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;密码 &nbsp;
                        </td>
                        <td><input id="sellerPassword" type="password" value="" placeholder="请输入密码" class="l_pwd"
                                   name="password"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;确认密码 &nbsp;
                        </td>
                        <td><input id="sellerConfirmPassword" type="password" value="" placeholder="请确认密码"
                                   class="l_pwd"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;邮箱 &nbsp;
                        </td>
                        <td><input id="sellerMailAddress" type="text" value="" placeholder="请输入邮箱" class="l_email"
                                   name="mailAddress"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;手机 &nbsp;
                        </td>
                        <td><input id="sellerPhoneNumber" type="text" value="" placeholder="请输入手机号" class="l_tel"
                                   name="phoneNumber"/></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td style="font-size:12px; padding-top:20px;">
                	<span style="font-family:'宋体';" class="fl">
                    	<label class="r_rad"><input type="checkbox"/></label><label class="r_txt">我已阅读并接受《用户协议》</label>
                    </span>
                        </td>
                    </tr>
                    <tr height="60">
                        <td>&nbsp;</td>
                        <td><input id="sellerSubmit" type="submit" value="立即注册" class="log_btn"/></td>
                    </tr>
                </table>
            </form>
            <!-- 顾客注册表单 -->
            <form id="buyerRegister" action="" method="post">
                {% csrf_token %}
                <table style="width:420px; font-size:14px; margin:20px;">
                    <tr height="50">
                        <td width="95">&nbsp;</td>
                        <td>
                            <span class="fl" style="font-size:24px;">顾客注册</span>
                            <span class="fr">已有商城账号，<a href="{% url 'login' %}" style="color:#ff4e00;">我要登录</a></span>
                        </td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;用户名 &nbsp;
                        </td>
                        <td><input id="customerName" type="text" value="" placeholder="请输入用户名" class="l_user"
                                   name="customerName"></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;密码 &nbsp;
                        </td>
                        <td><input id="customerPassword" type="password" placeholder="请输入密码" value="" class="l_pwd"
                                   name="password"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;确认密码 &nbsp;
                        </td>
                        <td><input id="customerConfirmPassword" type="password" placeholder="请确认密码" value=""
                                   class="l_pwd"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;邮箱 &nbsp;
                        </td>
                        <td><input id="customerMailAddress" type="text" value="" placeholder="请输入邮箱" class="l_email"
                                   name="mailAddress"/></td>
                    </tr>
                    <tr height="50">
                        <td>
                            <text style="color:#ff4e00;">*</text>&nbsp;手机 &nbsp;
                        </td>
                        <td><input id="customerPhoneNumber" type="text" value="" placeholder="请输入手机号" class="l_tel"
                                   name="phoneNumber"/></td>
                    </tr>
                    <tr>
                        <td>&nbsp;</td>
                        <td style="font-size:12px; padding-top:20px;">
                	<span style="font-family:'宋体';" class="fl">
                    	<label class="r_rad"><input type="checkbox"/></label><label class="r_txt">我已阅读并接受《用户协议》</label>
                    </span>
                        </td>
                    </tr>
                    <tr height="60">
                        <td>&nbsp;</td>
                        <td><input id="customerSubmit" type="submit" value="立即注册" class="log_btn"/></td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
</div>
<!--End Login End-->
<div id="popBox">
    <div id="msgContent"></div>
    <div class="close">
        <button onclick="closePopBox()">确定</button>
    </div>
</div>

</body>
<script type="text/javascript">
    let objMsgContent = $('#msgContent');
    {% if msg %}
        objMsgContent.text('{{ msg }}')
        openPopBox();
    {% endif %}
    function openPopBox() {
        document.getElementById("popBox").style.display = "block";
    }

    // 关闭弹窗
    function closePopBox() {
        document.getElementById("popBox").style.display = "none";
    }

    $('#customerSubmit').click(function () {
        if (!$('#customerName').val().match(/^[\u4E00-\u9FA5a-zA-Z0-9_]{3,40}$/)) {
            objMsgContent.text('用户名格式不合法，只能输入3到40位之间的汉字，字母，下划线');
            openPopBox();
        } else if (!$('#customerPassword').val().match(/^[0-9]{6,20}$/)) {
            objMsgContent.text('密码格式不合法，只能输入6到20位的数字');
            openPopBox();
        } else if ($('#customerConfirmPassword').val() !== $('#customerPassword').val()) {
            objMsgContent.text('确认密码和密码不一致');
            openPopBox();
        } else if (!$('#customerMailAddress').val().match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/)) {
            objMsgContent.text('邮箱格式不符合');
            openPopBox();
        } else if (!$('#customerPhoneNumber').val().match(/^[0-9]{6,20}$/)) {
            objMsgContent.text('手机号码格式错误');
            openPopBox();
        } else {
            return true;
        }
        return false;
    })

    $('#SellerSubmit').click(function () {
        if (!$('#SellerName').val().match(/^[\u4E00-\u9FA5a-zA-Z0-9_]{3,40}$/)) {
            objMsgContent.text('用户名格式不合法，只能输入3到40位之间的汉字，字母，下划线');
            openPopBox();
        } else if (!$('#SellerPassword').val().match(/^[0-9]{6,20}$/)) {
            objMsgContent.text('密码格式不合法，只能输入6到20位的数字');
            openPopBox();
        } else if ($('#SellerConfirmPassword').val() !== $('#SellerPassword').val()) {
            objMsgContent.text('确认密码和密码不一致');
            openPopBox();
        } else if (!$('#SellerMailAddress').val().match(/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/)) {
            objMsgContent.text('邮箱格式不符合');
            openPopBox();
        } else if (!$('#SellerPhoneNumber').val().match(/^[0-9]{6,20}$/)) {
            objMsgContent.text('手机号码格式错误');
            openPopBox();
        } else {
            return true;
        }
        return false;
    })

    document.getElementById("sellerRegister").hidden = true;

    // 切换成商家登录
    function sellerRegister() {
        document.getElementById("buyerRegister").hidden = true;
        document.getElementById("sellerRegister").hidden = false;
    }

    // 切换成顾客登录
    function buyerRegister() {
        document.getElementById("sellerRegister").hidden = true;
        document.getElementById("buyerRegister").hidden = false;
    }
</script>
</html>
